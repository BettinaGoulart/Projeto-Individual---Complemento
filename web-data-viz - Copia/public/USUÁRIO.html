<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Tela de Usuário - Startkick </title>
    <link rel="stylesheet" href="css/USUÁRIO.CSS">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&display=swap" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>

<body>

    <div class="navigation">
        <ul>
            <li class="list">
                <u span style="color:#fff"><span class="title"
                        style="color:#fff; font-size: 30px; text-align: center;padding-left: 70px;">STARTKICK</span></u>
            </li>
            <li class="list">
                <a href="index.html">
                    <span class="icon"><ion-icon name="search-outline"></ion-icon></span>
                    <span class="title">Home</span>
                </a>
            </li>
            <li class="list active">
                <a href="USUÁRIO.html">
                    <span class="icon"><ion-icon name="thermometer-outline"></ion-icon></span>
                    <span class="title">Tela do Usuário</span>
                </a>
            </li>
            <li class="list">
                <a href="PREFERENCIA.html">
                    <span class="icon"> <ion-icon name="stats-chart-outline"></ion-icon></span>
                    <span class="title">Suas Preferências</span>
                </a>
            </li>
            <li class="list">
                <a href="em alta.html">
                    <span class="icon"><ion-icon name="log-out-outline"></ion-icon></span>
                    <span class="title">Em Alta</span>
                </a>
            </li>
        </ul>
    </div>

    <div class="container" id="container">

        <div class="foto">
            <img class="fotousuario" src="assets/IMAGENS/icone de usuário.png">
        </div>

        USER????? // ?? REVIEWS

        <br>
        <br>

        <div class="descricao">

            <div id="div_texto"></div>

        </div>

        <br>

        <div class="botao">

            <input type="text" id="input_descricao">
            <button onclick="atualizar()">Atualizar</button>
            <button onclick="exibir1()">Exibir Preferencias</button>

        </div>

    </div>



    <div class="container2" id="container2">

        <div class="preferencia">

            <div class="umdois">

                <div class="um" id="um">
                    TIME FAVORITO:
                </div>

                <div class="dois" id="dois">
                    LIGA FAVORITO:
                </div>

            </div>

            <div class="tresquatro">

                <div class="tres" id="tres">
                    SELEÇÃO FAVORITA:
                </div>

                <div class="quatro" id="quatro">
                    ESTILO FAVORITO:
                </div>

            </div>

        </div>

        <select id="select_camiseta">
            <option value="#">Selecione uma Opção</option>
            <option value="1">Camiseta 1</option>
            <option value="2">Camiseta 2</option>
            <option value="3">Camiseta 3</option>
            <option value="4">Camiseta 4</option>
            <option value="5">Camiseta 5</option>

        </select>

        <br>
        <br>
        <br>

        <button onclick="mostrar()"> Mostrar </button>

        <div class="grafico">

            <div id="graficos">
            </div>

        </div>

    </div>





    <div class="body_pref" id="body_pref">

        <div class="navigation">
            <ul>
                <li class="list">
                    <u span style="color:#fff"><span class="title"
                            style="color:#fff; font-size: 30px; text-align: center;padding-left: 70px;">STARTKICK</span></u>
                </li>
                <li class="list">
                    <a href="index.html">
                        <span class="icon"><ion-icon name="search-outline"></ion-icon></span>
                        <span class="title">Home</span>
                    </a>
                </li>
                <li class="list active">
                    <a href="USUÁRIO.html">
                        <span class="icon"><ion-icon name="thermometer-outline"></ion-icon></span>
                        <span class="title">Tela do Usuário</span>
                    </a>
                </li>
                <li class="list">
                    <a href="PREFERENCIA.html">
                        <span class="icon"> <ion-icon name="stats-chart-outline"></ion-icon></span>
                        <span class="title">Suas Preferências</span>
                    </a>
                </li>
                <li class="list">
                    <a href="em alta.html">
                        <span class="icon"><ion-icon name="log-out-outline"></ion-icon></span>
                        <span class="title">Em Alta</span>
                    </a>
                </li>
            </ul>
        </div>


        <div class="container">

            <u>
                <h1>Nos conte um pouco sobre você!</h1>
            </u>

            <button onclick="salvar()"> Salvar </button>
            <button onclick="voltar()"> Voltar </button>


            <div class="pref1">

                ESCOLHA SEU TIME DO CORAÇÃO! <select id="pref1">

                    <option value="#"> Selecione uma Opção </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>
                    <option value="#"> Selecione </option>

                </select>

            </div>


            <div class="pref2">

                ESCOLHA SUA LIGA PREFERIDA! <select id="pref2">

                    <option value="#">Selecione uma opção</option>
                    <option value="inglesa">English Premier League</option>
                    <option value="francesa">French Ligue 1</option>
                    <option value="alemanha">German 1. Bundesliga</option>
                    <option value="italiana">Italian Serie A</option>
                    <option value="espanhola">Spain Primera Division</option>
                    <option value="argentina">Argentina Primera División</option>
                    <option value="brasileira">Campeonato Brasileiro Série A</option>
                    <option value="portuguesa">Portuguese Liga ZON SAGRES</option>
                    <option value="saudita">Saudi Abdul L. Jameel League</option>
                    <option value="USA_liga">USA Major League Soccer</option>



                </select>

            </div>


            <div class="pref3">

                ESCOLHA SUA SELEÇÃO DO CORAÇÃO! <select id="pref3">

                    <option value="#">Selecione uma Opção</option>
                    <option value="argentina">Argentina</option>
                    <option value="australia">Australia</option>
                    <option value="austria">Austria</option>
                    <option value="belgica">Belgica</option>
                    <option value="brasil">Brasil</option>
                    <option value="canada">Canada</option>
                    <option value="china">China</option>
                    <option value="inglaterra">Inglaterra</option>
                    <option value="franca">Franca</option>
                    <option value="alemanha">Alemanha</option>
                    <option value="grecia">Grecia</option>
                    <option value="italia">Italia</option>
                    <option value="mexico">Mexico</option>
                    <option value="paises_baixos">Paises Baixos</option>
                    <option value="noruega">Noruega</option>
                    <option value="polonia">Polonia</option>
                    <option value="portugal">Portugal</option>
                    <option value="russia">Russia</option>
                    <option value="espanha">Espanha</option>
                    <option value="USA">Estados Unidos</option>
                    <option value="gales">País de Gales</option>

                </select>

            </div>


            <div class="pref4">

                ESCOLHA O ESTILO DE CAMISETAS QUE PREFERE! <br><br> <select id="pref4">

                    <option value="#">Selecione uma opção</option>
                    <option value="moderna">Moderna</option>
                    <option value="vintage">Vintage</option>
                    <option value="customizada">Customizada</option>
                    <option value="especial">Edição Especial</option>
                </select>

            </div>

        </div>

    </div>



</body>

</html>

<script>


    function atualizar() {

        var texto = input_descricao.value

        div_texto.innerHTML = `${texto}`
    }


    function exibir1() {

        document.getElementById("container").style.display = "none";
        document.getElementById("container2").style.display = "none";
        document.getElementById("body_pref").style.display = "flex";



        // fetch("/usuarios/exibir1", {
        //     method: "GET",
        //     headers: {
        //         "Content-Type": "application/json",
        //     },
        // })
        //     .then(function (resposta) {
        //         console.log("Estou no then do exibir1")
        //         console.log(resposta)
        //         console.log(resposta.status)

        //         if (resposta.ok) {

        //             resposta.json().then(function (resposta) {
        //                 var dados = resposta[0];

        //                 um.innerHTML = dados.TimeUsuario;
        //             })

        //         }
        //     })
    }


    function salvar() {

        var pref1Var = pref1.value
        var pref2Var = pref2.value
        var pref3Var = pref3.value
        var pref4Var = pref4.value

        fetch("/usuarios/salvar", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                // crie um atributo que recebe o valor recuperado aqui
                // Agora vá para o arquivo routes/usuario.js
                pref1Server: pref1Var,
                pref2Server: pref2Var,
                pref3Server: pref3Var,
                pref4Server: pref4Var,
            }),
        })

        alert("Preferências salvas com sucesso!")

    }


    function voltar() {

        var pref1Var = pref1.value
        var pref2Var = pref2.value
        var pref3Var = pref3.value
        var pref4Var = pref4.value

        if (pref1Var == '#' && pref2Var == '#' && pref3Var == '#' && pref4Var == '#') {

            alert("Preencha todos os campos para salvar suas preferências!")

        }

        else {
            
            um.innerHTML = `TIME FAVORITO: ${pref1Var}`
            dois.innerHTML = `LIGA FAVORITA: ${pref2Var}`
            tres.innerHTML = `SELEÇÃO FAVORITA: ${pref3Var}`
            quatro.innerHTML = `ESTILO FAVORITO: ${pref4Var}`

            document.getElementById("container").style.display = "flex";
            document.getElementById("container2").style.display = "flex";
            document.getElementById("body_pref").style.display = "none";
        }
    }


    function mostrar() {

        var select = select_camiseta.value

        if (select == '#') {

            alert("Por favor selecione uma opção de camiseta!")
        }

        else if (select == '1') {

            obterDadosGrafico1()

        }

        else if (select == '2') {

            obterDadosGrafico2()

        }

        else if (select == '3') {

            obterDadosGrafico3()

        }

        else if (select == '4') {

            obterDadosGrafico4()

        }

        else if (select == '5') {

            obterDadosGrafico5()

        }
    }


    function obterDadosGrafico1() {

        document.getElementById("graficos").innerHTML += `<canvas style ="width = 500px;" id = "myChartCanvas"></canvas>`

        fetch(`/medidas/obterDadosGrafico1/`, {
            method: "GET",
            cache: 'no-store',
            headers: {
                "Content-Type": 'application/json'
            }
        }).then(function (resposta) {
            if (resposta.ok) {
                resposta.json().then(function (resposta) {
                    console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
                    resposta.reverse();

                    plotarGrafico1(resposta);

                });

            } else {
                console.error('Nenhum dado encontrado ou erro na API');
            }
        })
            .catch(function (error) {
                console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
            });
    }

    // Esta função *plotarGrafico* usa os dados capturados na função anterior para criar o gráfico

    function plotarGrafico1(resposta) {

        console.log('iniciando plotagem do gráfico...');

        // Criando estrutura para plotar gráfico - labels
        let labels = [];

        // Criando estrutura para plotar gráfico - dados
        let dados = {
            labels: labels,
            datasets: [{
                label: 'notaAtribuida',
                data: [],
                fill: false,
                borderColor: '#002860',
                tension: 0.1
            }]
        };

        console.log('----------------------------------------------')
        console.log('Estes dados foram recebidos pela funcao "obterDadosGrafico" e passados para "plotarGrafico":')
        console.log(resposta)

        // Inserindo valores recebidos em estrutura para plotar o gráfico
        for (i = 0; i < resposta.length; i++) {
            var registro = resposta[i];
            labels.push(registro.nota1);
            dados.datasets[0].data.push(registro.quantidade);
        }

        console.log('----------------------------------------------')
        console.log('O gráfico será plotado com os respectivos valores:')
        console.log('Labels:')
        console.log(labels)
        console.log('Dados:')
        console.log(dados.datasets)
        console.log('----------------------------------------------')

        // Criando estrutura para plotar gráfico - config
        const config = {
            type: 'bar',
            data: dados,
        };

        // Adicionando gráfico criado em div na tela
        let myChart = new Chart(
            document.getElementById(`myChartCanvas`),
            config
        );

    }





    function obterDadosGrafico2() {

        document.getElementById("graficos").innerHTML += `<canvas style ="width = 500px;" id = "myChartCanvas"></canvas>`

        fetch(`/medidas/obterDadosGrafico2/`, {
            method: "GET",
            cache: 'no-store',
            headers: {
                "Content-Type": 'application/json'
            }
        }).then(function (resposta) {
            if (resposta.ok) {
                resposta.json().then(function (resposta) {
                    console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
                    resposta.reverse();

                    plotarGrafico2(resposta);

                });

            } else {
                console.error('Nenhum dado encontrado ou erro na API');
            }
        })
            .catch(function (error) {
                console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
            });
    }

    // Esta função *plotarGrafico* usa os dados capturados na função anterior para criar o gráfico

    function plotarGrafico2(resposta) {

        console.log('iniciando plotagem do gráfico...');

        // Criando estrutura para plotar gráfico - labels
        let labels = [];

        // Criando estrutura para plotar gráfico - dados
        let dados = {
            labels: labels,
            datasets: [{
                label: 'notaAtribuida',
                data: [],
                fill: false,
                borderColor: 'rgb(75, 192, 192)',
                tension: 0.1
            }]
        };

        console.log('----------------------------------------------')
        console.log('Estes dados foram recebidos pela funcao "obterDadosGrafico" e passados para "plotarGrafico":')
        console.log(resposta)

        // Inserindo valores recebidos em estrutura para plotar o gráfico
        for (i = 0; i < resposta.length; i++) {
            var registro = resposta[i];
            labels.push(registro.nota2);
            dados.datasets[0].data.push(registro.quantidade);
        }

        console.log('----------------------------------------------')
        console.log('O gráfico será plotado com os respectivos valores:')
        console.log('Labels:')
        console.log(labels)
        console.log('Dados:')
        console.log(dados.datasets)
        console.log('----------------------------------------------')

        // Criando estrutura para plotar gráfico - config
        const config = {
            type: 'bar',
            data: dados,
        };

        // Adicionando gráfico criado em div na tela
        let myChart = new Chart(
            document.getElementById(`myChartCanvas`),
            config
        );

    }





    function obterDadosGrafico3() {

        document.getElementById("graficos").innerHTML += `<canvas style ="width = 500px;" id = "myChartCanvas"></canvas>`

        fetch(`/medidas/obterDadosGrafico3/`, {
            method: "GET",
            cache: 'no-store',
            headers: {
                "Content-Type": 'application/json'
            }
        }).then(function (resposta) {
            if (resposta.ok) {
                resposta.json().then(function (resposta) {
                    console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
                    resposta.reverse();

                    plotarGrafico3(resposta);

                });

            } else {
                console.error('Nenhum dado encontrado ou erro na API');
            }
        })
            .catch(function (error) {
                console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
            });
    }

    // Esta função *plotarGrafico* usa os dados capturados na função anterior para criar o gráfico

    function plotarGrafico3(resposta) {

        console.log('iniciando plotagem do gráfico...');

        // Criando estrutura para plotar gráfico - labels
        let labels = [];

        // Criando estrutura para plotar gráfico - dados
        let dados = {
            labels: labels,
            datasets: [{
                label: 'notaAtribuida',
                data: [],
                fill: false,
                borderColor: 'rgb(75, 192, 192)',
                tension: 0.1
            }]
        };

        console.log('----------------------------------------------')
        console.log('Estes dados foram recebidos pela funcao "obterDadosGrafico" e passados para "plotarGrafico":')
        console.log(resposta)

        // Inserindo valores recebidos em estrutura para plotar o gráfico
        for (i = 0; i < resposta.length; i++) {
            var registro = resposta[i];
            labels.push(registro.nota3);
            dados.datasets[0].data.push(registro.quantidade);
        }

        console.log('----------------------------------------------')
        console.log('O gráfico será plotado com os respectivos valores:')
        console.log('Labels:')
        console.log(labels)
        console.log('Dados:')
        console.log(dados.datasets)
        console.log('----------------------------------------------')

        // Criando estrutura para plotar gráfico - config
        const config = {
            type: 'bar',
            data: dados,
        };

        // Adicionando gráfico criado em div na tela
        let myChart = new Chart(
            document.getElementById(`myChartCanvas`),
            config
        );

    }





    function obterDadosGrafico4() {

        document.getElementById("graficos").innerHTML += `<canvas style ="width = 500px;" id = "myChartCanvas"></canvas>`

        fetch(`/medidas/obterDadosGrafico4/`, {
            method: "GET",
            cache: 'no-store',
            headers: {
                "Content-Type": 'application/json'
            }
        }).then(function (resposta) {
            if (resposta.ok) {
                resposta.json().then(function (resposta) {
                    console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
                    resposta.reverse();

                    plotarGrafico4(resposta);

                });

            } else {
                console.error('Nenhum dado encontrado ou erro na API');
            }
        })
            .catch(function (error) {
                console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
            });
    }

    // Esta função *plotarGrafico* usa os dados capturados na função anterior para criar o gráfico

    function plotarGrafico4(resposta) {

        console.log('iniciando plotagem do gráfico...');

        // Criando estrutura para plotar gráfico - labels
        let labels = [];

        // Criando estrutura para plotar gráfico - dados
        let dados = {
            labels: labels,
            datasets: [{
                label: 'notaAtribuida',
                data: [],
                fill: false,
                borderColor: 'rgb(75, 192, 192)',
                tension: 0.1
            }]
        };

        console.log('----------------------------------------------')
        console.log('Estes dados foram recebidos pela funcao "obterDadosGrafico" e passados para "plotarGrafico":')
        console.log(resposta)

        // Inserindo valores recebidos em estrutura para plotar o gráfico
        for (i = 0; i < resposta.length; i++) {
            var registro = resposta[i];
            labels.push(registro.nota4);
            dados.datasets[0].data.push(registro.quantidade);
        }

        console.log('----------------------------------------------')
        console.log('O gráfico será plotado com os respectivos valores:')
        console.log('Labels:')
        console.log(labels)
        console.log('Dados:')
        console.log(dados.datasets)
        console.log('----------------------------------------------')

        // Criando estrutura para plotar gráfico - config
        const config = {
            type: 'bar',
            data: dados,
        };

        // Adicionando gráfico criado em div na tela
        let myChart = new Chart(
            document.getElementById(`myChartCanvas`),
            config
        );

    }





    function obterDadosGrafico5() {

        document.getElementById("graficos").innerHTML += `<canvas style ="width = 500px;" id = "myChartCanvas"></canvas>`

        fetch(`/medidas/obterDadosGrafico5/`, {
            method: "GET",
            cache: 'no-store',
            headers: {
                "Content-Type": 'application/json'
            }
        }).then(function (resposta) {
            if (resposta.ok) {
                resposta.json().then(function (resposta) {
                    console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
                    resposta.reverse();

                    plotarGrafico2(resposta);

                });

            } else {
                console.error('Nenhum dado encontrado ou erro na API');
            }
        })
            .catch(function (error) {
                console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
            });
    }

    // Esta função *plotarGrafico* usa os dados capturados na função anterior para criar o gráfico

    function plotarGrafico5(resposta) {

        console.log('iniciando plotagem do gráfico...');

        // Criando estrutura para plotar gráfico - labels
        let labels = [];

        // Criando estrutura para plotar gráfico - dados
        let dados = {
            labels: labels,
            datasets: [{
                label: 'notaAtribuida',
                data: [],
                fill: false,
                borderColor: 'rgb(75, 192, 192)',
                tension: 0.1
            }]
        };

        console.log('----------------------------------------------')
        console.log('Estes dados foram recebidos pela funcao "obterDadosGrafico" e passados para "plotarGrafico":')
        console.log(resposta)

        // Inserindo valores recebidos em estrutura para plotar o gráfico
        for (i = 0; i < resposta.length; i++) {
            var registro = resposta[i];
            labels.push(registro.nota5);
            dados.datasets[0].data.push(registro.quantidade);
        }

        console.log('----------------------------------------------')
        console.log('O gráfico será plotado com os respectivos valores:')
        console.log('Labels:')
        console.log(labels)
        console.log('Dados:')
        console.log(dados.datasets)
        console.log('----------------------------------------------')

        // Criando estrutura para plotar gráfico - config
        const config = {
            type: 'bar',
            data: dados,
        };

        // Adicionando gráfico criado em div na tela
        let myChart = new Chart(
            document.getElementById(`myChartCanvas`),
            config
        );

    }
</script>